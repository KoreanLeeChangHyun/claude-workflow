# Plan Template Guide

planner 에이전트가 계획서 작성 시 참조하는 템플릿 사용 가이드.

## 사용 방법

1. `.claude/skills/workflow-plan/templates/plan.md`를 Read 도구로 로드
2. `{{placeholder}}`를 실제 값으로 치환
3. 선택적 섹션은 필요에 따라 포함/생략
4. 작업 내용에 맞게 각 섹션을 작성

## Placeholder 목록

| Placeholder | 설명 | 도출 방법 | 예시 |
|-------------|------|----------|------|
| `{{workId}}` | 작업 ID (HHMMSS 6자리) | 입력 파라미터 직접 사용 | `143000` |
| `{{command}}` | 실행 명령어 | 입력 파라미터 직접 사용 | `implement` |
| `{{date}}` | 작성일 (KST) | 현재 시간 사용 | `2026-02-09 14:30:00` |
| `{{request}}` | 원본 요청 텍스트 | request 파라미터 그대로 기록 | `로그인 기능 추가해주세요` |

**참고**: 제목(`# [제목]`)은 planner가 요청을 분석하여 적절한 제목을 자유롭게 생성합니다. placeholder가 아닌 가이드입니다.

**품질 레벨 (선택적 메타 필드)**: 명령어별 기본 Level과 다른 품질 수준이 필요할 때만 `- 품질 레벨: Level N` 형식으로 메타 정보에 추가합니다. 기본값은 `workflow-plan/SKILL.md`의 "품질 레벨 프레임워크"를 참조하세요.

## 섹션 가이드

| 순번 | 섹션 | 필수/권장/선택 | 생략 조건 | 비고 |
|------|------|--------------|----------|------|
| 1 | 제목 (H1) | 필수 | - | - |
| 2 | 메타 정보 | 필수 | - | - |
| 3 | 사용자 질의응답 내역 | 필수 | - | - |
| 4 | 작업 요약 | 선택 | T1 태스크 1개만 있는 단순 계획, 또는 메타 정보의 "요청"으로 충분히 이해 가능한 경우 | "요청"(사용자 원문) vs "작업 요약"(planner 분석/해석 결과) 구분 |
| 5 | 작업 흐름도 | 권장 | 워커 1명이거나 종속성 없는 단순 병렬 구조 | mermaid `flowchart TD` 형식 |
| 6 | 작업 목록 | 필수 | - | - |
| 7 | 워커별 작업 상세 | 권장 | 워커 1명이고 작업 단순 | H3 서브섹션 형식, 항목 4-5개, 행위 동사 시작 |
| 8 | 실행 계획 | 필수 | - | - |
| 9 | 완료 기준 | 권장 | 단일 T1 태스크만 있는 매우 단순한 계획 | 측정 가능성 원칙 준수 |
| 10 | 작업 범위 | 선택 | 범위가 자명한 단순 작업 | In-Scope/Out-of-Scope 구조 |
| 11 | 리스크 평가 | 선택 | T1 태스크만 구성. T2 이상 1개라도 있으면 권장 | - |
| 12 | 가정 사항 | 선택 | 모든 요구사항이 100% 명확화된 경우 | - |
| 13 | 비고 | 권장 | 추가 정보 없음 | 정량적 현황 서브섹션 포함 |

## 신규 섹션 권장 조건 매핑

command별로 신규 추가된 섹션의 포함 권장 여부를 나타낸다.

| 섹션 | implement | refactor | review | build | analyze | architect | framework | research |
|------|-----------|----------|--------|-------|---------|-----------|-----------|----------|
| 작업 요약 | W02+ | W02+ | W02+ | - | W02+ | 권장 | W02+ | 권장 |
| 작업 범위 | 복잡 시 | - | - | - | 권장 | 권장 | - | 권장 |

## command별 비고 섹션 활용 힌트

| command | 비고에 포함하면 유용한 내용 | 정량적 데이터 포함 권장 |
|---------|--------------------------|----------------------|
| implement | 현황 분석, 원인 분석, 설계 고려사항, 대상 파일 목록, 제외 항목 | 대상 파일 수, 수정 예상 라인 규모, 현행 동작 수치 (예: "대상 파일 3개, 총 450줄, 함수 12개") |
| review | 사전 조사 결과 요약, 검토 범위 상세 | 검토 대상 파일 수, 코드 라인 규모, 함수 수 (예: "대상 15개 파일, 총 2,400줄, 함수 45개") |
| research | 현황 요약, 배경 정보, 선행 연구 참조. **"연구 범위 경계"는 "작업 범위" 섹션으로 대체** | 현황 스냅샷 수치: 크기, 파일 수, 기간 등 (예: "총 2.3MB, 301개 파일, 36개 디렉토리, 기간 2일") |
| refactor | 개선 전 상태, 리팩토링 방향성 | 리팩토링 전 상태 수치: 코드 라인, 함수 수, 중복도 (예: "현재 800줄, 함수 20개, 중복 코드 3건") |
| architect | 제약 조건, 기존 아키텍처 요약. **설계 범위 경계는 "작업 범위" 섹션으로 대체** | 현행 구조 수치: 모듈 수, 의존성 수, 레이어 수 (예: "모듈 8개, 의존성 15개, 3-tier 구조") |
| 기타 | 필요에 따라 자유 활용 | 작업 대상의 규모를 나타내는 수치 데이터 권장 |

## 작업 목록 테이블 컬럼 가이드

| 컬럼 | 필수/선택 | 설명 |
|------|----------|------|
| ID | 필수 | W01, W02 등 순번 |
| 작업 | 필수 | 태스크 설명 |
| 종속성 | 필수 | 선행 태스크 ID 또는 `-` |
| Phase | 필수 | 실행 Phase 번호 |
| 복잡도 | 선택 | T1(점수)/T2(점수)/T3(점수). 태스크가 단순하면 생략 가능 |
| 서브에이전트 | 선택 | Worker. 기본값이므로 생략 가능 |

## 완료 기준 작성 예시

완료 기준은 측정 가능하게 작성해야 한다. 아래 좋은 예/나쁜 예를 참고하여 모든 완료 기준에 정량적 수치, 구체적 파일명, 또는 검증 가능한 조건을 포함한다.

| 분류 | 나쁜 예 | 좋은 예 | 개선 포인트 |
|------|---------|---------|-----------|
| 정량적 수치 부재 | "로그 관리 전략이 비교 분석됨" | "3가지 이상의 로그 관리 전략이 비교 분석됨" | 수치 기준 "3가지 이상" 추가 |
| 파일명 미명시 | "체크리스트 섹션이 추가됨" | "`SKILL.md`에 체크리스트 섹션이 추가됨" | 구체적 파일명 명시 |
| 주관적 판정 | "문법이 올바르게 작성됨" | "`flowchart TD` 형식으로 작성되고 mermaid.live에서 렌더링 성공" | 검증 가능한 조건으로 변환 |
| 존재 확인형 | "테스트가 작성됨" | "단위 테스트 5개 이상 작성되고 전체 통과(0 failures)" | 수치 + 검증 조건 결합 |
| 범위 불명확 | "가려지지 않음" | "잔여 참조 0건, 관련 import 구문 0건" | 정량적 zero 기준으로 명확화 |
| 추상적 완료 | "권고안이 제시됨" | "단기/중기/장기 권고안이 우선순위와 함께 제시됨" | 분류 체계 + 필수 요소 명시 |

## 단일 템플릿 사용 근거

모든 command의 계획서가 동일한 핵심 구조를 공유하므로 command별 분리 불필요:
- 핵심 5개 섹션: 100% 일치율 (13건 전수 분석 기반)
- command별 차이: 비고/선택적 섹션의 내용 차이로 수용 가능
- report 템플릿과 달리 구조적 다양성 부재 (report는 command별 완전 상이한 구조)
