---
name: command-analyze-codebase
description: "Codebase analysis skill. Analyzes project structure, architecture, dependencies, and code quality. Use for codebase inspection: (1) project structure analysis, (2) architecture analysis, (3) invoked via cc:analyze command. Triggers: '코드베이스', 'codebase', '아키텍처', 'architecture', '코드 구조', '의존성', '모듈'."
license: "Apache-2.0"
---

# Analyze Codebase

코드베이스를 분석하여 프로젝트 구조, 아키텍처, 의존성 리포트를 작성하는 스킬입니다.

## 목적

- 프로젝트 전체 구조를 체계적으로 파악
- 아키텍처 패턴 및 설계 원칙 식별
- 의존성 관계 및 모듈 구조 분석
- 코드 품질 지표 및 개선점 도출
- 분석 결과를 구조화된 리포트로 제공

## 핵심 원칙

1. **전체 관점**: 개별 파일보다 전체 구조에 집중
2. **객관성**: 사실 기반 분석, 추측 최소화
3. **체계성**: 일관된 분석 프레임워크 적용
4. **실용성**: 실제 개선에 활용 가능한 인사이트 제공
5. **문서화**: 분석 결과를 구조화된 리포트로 저장

## 워크플로우

```
프로젝트 구조 파악 → 기술 스택 식별 → 아키텍처 분석 → 의존성 분석 → 코드 품질 지표 → 리포트 작성
         ↓
    Glob, Read 활용하여 디렉토리/파일 탐색
```

### 1단계: 프로젝트 구조 파악

프로젝트의 디렉토리 및 파일 구조를 파악합니다.

**확인 항목:**
- 루트 디렉토리 구조
- 주요 디렉토리의 역할 (src, lib, test, docs 등)
- 파일 구성 패턴 (기능별, 레이어별 등)
- 설정 파일 위치 (config, env 등)

**사용 도구:**
```
Glob: **/* 패턴으로 전체 파일 목록 조회
Bash: ls -la, tree 명령어로 구조 확인
Read: 주요 파일 내용 확인
```

### 2단계: 기술 스택 식별

프로젝트에서 사용하는 기술 스택을 식별합니다.

**확인 파일:**

| 파일 | 정보 |
|------|------|
| package.json | Node.js 의존성, 스크립트 |
| requirements.txt | Python 패키지 |
| Cargo.toml | Rust 의존성 |
| go.mod | Go 모듈 |
| build.gradle | Java/Kotlin 의존성 |
| pom.xml | Maven 의존성 |
| Gemfile | Ruby 의존성 |
| composer.json | PHP 의존성 |

**식별 항목:**
- 프로그래밍 언어
- 프레임워크 (React, Vue, Django, FastAPI 등)
- 빌드 도구 (Webpack, Vite, Gradle 등)
- 테스트 프레임워크 (Jest, Pytest, JUnit 등)
- 린터/포매터 (ESLint, Prettier, Black 등)

### 3단계: 아키텍처 패턴 분석

프로젝트의 아키텍처 패턴을 분석합니다.

**분석 항목:**

| 패턴 | 특징 | 디렉토리 구조 예시 |
|------|------|-------------------|
| MVC | Model-View-Controller 분리 | models/, views/, controllers/ |
| MVVM | Model-View-ViewModel | models/, views/, viewmodels/ |
| Clean Architecture | 레이어 분리 | domain/, application/, infrastructure/ |
| Hexagonal | 포트와 어댑터 | ports/, adapters/, core/ |
| Feature-based | 기능별 모듈화 | features/auth/, features/user/ |
| Monorepo | 여러 패키지 통합 | packages/, apps/ |

**확인 항목:**
- 레이어 분리 여부
- 의존성 방향 (안쪽으로 향하는지)
- 모듈 간 결합도
- 공통 모듈 존재 여부 (shared, common, utils)

### 4단계: 의존성 분석

프로젝트의 의존성 관계를 분석합니다.

**외부 의존성:**
- 프로덕션 의존성 (dependencies)
- 개발 의존성 (devDependencies)
- 피어 의존성 (peerDependencies)
- 의존성 버전 관리 상태

**내부 의존성:**
- 모듈 간 import/export 관계
- 순환 의존성 존재 여부
- 의존성 깊이

**분석 도구:**
```
Grep: import/require 문 검색
Read: 의존성 설정 파일 확인
```

### 5단계: 코드 품질 지표

코드 품질 관련 지표를 분석합니다.

> **관련 스킬:** 상세한 코드 품질 검사(린트/타입체크 자동 실행, DRY/KISS/YAGNI 원칙 위반 탐지, 정량적 Code Quality Score 산출)는 `command-code-quality-checker` 스킬을 참조하세요. (`/.claude/skills/command-code-quality-checker/SKILL.md`)

**분석 항목:**

| 지표 | 확인 방법 | 기준 |
|------|----------|------|
| 파일 크기 | 파일당 라인 수 | 300줄 이하 권장 |
| 함수 길이 | 함수당 라인 수 | 50줄 이하 권장 |
| 중복 코드 | 유사 패턴 검색 | 최소화 필요 |
| 테스트 커버리지 | 테스트 파일 비율 | 높을수록 좋음 |
| 문서화 | README, 주석 | 주요 모듈 문서화 필요 |
| 타입 안전성 | TypeScript, 타입 힌트 | 사용 권장 |

**확인 사항:**
- 코딩 컨벤션 준수 여부
- 에러 처리 패턴
- 로깅 전략
- 설정 관리 방식

### 6단계: 리포트 작성

분석 결과를 리포트로 작성합니다.

**저장 위치:**
```
.workflow/analyze/<YYYYMMDD>-<HHMMSS>-<제목>/report.md
```

**파일명 규칙:**
- 날짜: 실행 시점의 날짜 (YYYYMMDD 형식)
- 시간: 실행 시점의 시간 (HHMMSS 형식)
- 제목: 분석 대상을 요약한 제목
- 예: `20260203-140000-프로젝트코드베이스분석.md`

## 리포트 템플릿

```markdown
# [프로젝트명] 코드베이스 분석

- 분석 일시: YYYY-MM-DD HH:MM:SS (KST)
- 분석 유형: 코드베이스 분석
- 원본 요청: [사용자의 원본 요청]

## 요약

[1-3문장으로 코드베이스 특징 요약]

## 프로젝트 구조

### 디렉토리 구조
```
project-root/
├── src/           # 소스 코드
│   ├── components/  # 컴포넌트
│   ├── services/    # 서비스
│   └── utils/       # 유틸리티
├── tests/         # 테스트
├── docs/          # 문서
└── config/        # 설정
```

### 주요 디렉토리 역할

| 디렉토리 | 역할 | 주요 파일 |
|----------|------|----------|
| src/ | 메인 소스 코드 | index.js |
| tests/ | 테스트 코드 | *.test.js |
| docs/ | 문서 | README.md |

## 기술 스택

### 언어 및 프레임워크
- **언어**: [언어명] (버전)
- **프레임워크**: [프레임워크명] (버전)
- **런타임**: [런타임] (버전)

### 주요 라이브러리

| 라이브러리 | 버전 | 용도 |
|-----------|------|------|
| lib1 | x.x.x | 설명 |
| lib2 | x.x.x | 설명 |

### 개발 도구
- **빌드**: [빌드 도구]
- **테스트**: [테스트 프레임워크]
- **린터**: [린터]
- **포매터**: [포매터]

## 아키텍처 분석

### 아키텍처 패턴
[식별된 아키텍처 패턴 및 설명]

### 레이어 구조
```
[레이어 다이어그램 또는 설명]
```

### 모듈 구조
- **핵심 모듈**: 설명
- **지원 모듈**: 설명
- **유틸리티**: 설명

### 데이터 흐름
[데이터가 어떻게 흐르는지 설명]

## 의존성 분석

### 외부 의존성

| 유형 | 개수 | 주요 패키지 |
|------|------|------------|
| 프로덕션 | N개 | pkg1, pkg2 |
| 개발 | N개 | pkg3, pkg4 |

### 내부 의존성
- 모듈 간 결합도: [낮음/중간/높음]
- 순환 의존성: [있음/없음]
- 공통 모듈 활용: [활용 수준]

### 의존성 다이어그램 (해당 시)
```
[모듈 간 의존성 관계]
```

## 코드 품질 지표

### 파일 통계

| 지표 | 값 | 평가 |
|------|-----|------|
| 총 파일 수 | N개 | - |
| 총 코드 라인 | N줄 | - |
| 평균 파일 크기 | N줄 | 양호/주의 |
| 최대 파일 크기 | N줄 | 양호/주의 |

### 테스트 현황
- 테스트 파일 비율: X%
- 테스트 커버리지: X% (측정 가능 시)

### 문서화 수준
- README: [있음/없음]
- API 문서: [있음/없음]
- 코드 주석: [충분/부족]

### 코드 품질 이슈

| 이슈 | 심각도 | 위치 | 개선 제안 |
|------|--------|------|----------|
| 이슈 1 | 높음/중간/낮음 | 파일/모듈 | 제안 |

## 강점

- 강점 1
- 강점 2
- 강점 3

## 개선 제안

### 단기 개선 (Quick Wins)
1. 개선 1
2. 개선 2

### 중장기 개선
1. 개선 1
2. 개선 2

## 참고 사항

- 참고 1
- 참고 2

## 결론

[코드베이스 분석 결과에 대한 종합적인 결론]
```

## 결과 보고 형식

분석 완료 후 다음 형식으로 결과를 보고합니다:

```markdown
## 코드베이스 분석 완료

### 분석 리포트
- **경로**: `.workflow/analyze/<YYYYMMDD>-<HHMMSS>-<제목>/report.md`
- **작성 일시**: YYYY-MM-DD HH:MM:SS (KST)

### 요약
[1-2문장 요약]

### 주요 발견
- **아키텍처**: [패턴명]
- **기술 스택**: [언어/프레임워크]
- **코드 품질**: [평가]

### 개선 제안
1. [우선 개선 사항 1]
2. [우선 개선 사항 2]

### 다음 단계
이 분석 결과를 바탕으로 `cc:refactor` 또는 `cc:implement` 명령어로 개선 작업을 진행할 수 있습니다.
```

## 주의사항

1. **전체 관점 유지**: 세부 코드보다 전체 구조에 집중
2. **객관적 분석**: 사실 기반으로 분석, 추측 최소화
3. **문서 저장 필수**: 모든 분석 결과는 리포트로 저장
4. **실용적 제안**: 실제 개선 가능한 제안 제공
5. **범위 제한**: 분석만 수행, 실제 코드 수정하지 않음
6. **민감 정보 주의**: 환경 변수, 인증 정보 등은 리포트에 포함하지 않음
