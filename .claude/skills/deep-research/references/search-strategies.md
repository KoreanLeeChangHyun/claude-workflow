# 도메인별 코드베이스 탐색 전략

deep-research 스킬에서 코드베이스를 심층 탐색할 때 활용하는 도메인별 전략 가이드입니다. 각 전략은 Explore 에이전트의 읽기 전용 도구(Read, Grep, Glob)만을 사용합니다.

## 전략 1: 구조 분석 전략

프로젝트의 전체 아키텍처와 모듈 구성을 파악할 때 사용합니다.

### 목적

- 프로젝트 디렉토리 레이아웃 이해
- 진입점(entry point) 식별
- 모듈/패키지 경계 파악
- 빌드/설정 파일 기반 기술 스택 확인

### 도구 조합 예시

| 단계 | 도구 | 패턴/경로 | 목적 |
|------|------|----------|------|
| 1 | Glob | `**/package.json`, `**/Cargo.toml`, `**/go.mod`, `**/pyproject.toml` | 프로젝트 루트 및 서브패키지 식별 |
| 2 | Glob | `src/**/*`, `lib/**/*`, `app/**/*` | 소스 코드 디렉토리 구조 파악 |
| 3 | Read | 각 패키지 매니페스트 파일 | 의존성 및 스크립트 확인 |
| 4 | Grep | `export default\|module\.exports\|func main\|def main\|fn main` | 진입점 후보 탐색 |
| 5 | Read | 식별된 진입점 파일 | 메인 흐름 분석 |

### 적용 시나리오

- 처음 접하는 프로젝트의 전체 구조 파악
- 마이크로서비스 아키텍처의 서비스 간 관계 이해
- 모노레포에서 패키지 간 경계 확인

## 전략 2: 패턴 발견 전략

코드베이스에서 반복되는 설계 패턴, 코딩 컨벤션, 에러 처리 방식을 식별할 때 사용합니다.

### 목적

- 디자인 패턴 사용 현황 파악 (팩토리, 싱글톤, 옵저버 등)
- 에러 처리 및 로깅 컨벤션 분석
- 설정 관리 방식 파악
- 테스트 패턴 및 커버리지 전략 분석

### 도구 조합 예시

| 단계 | 도구 | 패턴/경로 | 목적 |
|------|------|----------|------|
| 1 | Grep | `class\s+\w+Factory\|create\w+\(\)\|getInstance` | 팩토리/싱글톤 패턴 탐지 |
| 2 | Grep | `catch\|except\|rescue\|\.catch\(\|try\s*\{` | 에러 처리 패턴 수집 |
| 3 | Grep | `\.env\|config\.\|getConfig\|process\.env\|os\.environ` | 설정 관리 방식 탐지 |
| 4 | Glob | `**/*.test.*`, `**/*.spec.*`, `**/test_*.py`, `**/*_test.go` | 테스트 파일 구조 파악 |
| 5 | Read | 대표적 테스트 파일 3-5개 | 테스트 작성 패턴 분석 |

### 적용 시나리오

- 기존 컨벤션을 따라 새 코드를 작성해야 할 때
- 코드 리뷰 기준 수립을 위한 현황 파악
- 리팩토링 대상 식별 (안티패턴 탐지)

## 전략 3: 의존성 추적 전략

모듈 간 호출 관계, 순환 의존성, 외부 라이브러리 의존 현황을 추적할 때 사용합니다.

### 목적

- import/require 기반 모듈 간 의존성 그래프 구성
- 순환 의존성 탐지
- 특정 모듈의 영향 범위(blast radius) 산정
- 외부 라이브러리 의존도 분석

### 도구 조합 예시

| 단계 | 도구 | 패턴/경로 | 목적 |
|------|------|----------|------|
| 1 | Grep | `from\s+['"]\.{1,2}/\|import\s+.*from\s+['"]\.{1,2}/\|require\(['"]\.{1,2}/` | 상대 경로 import 수집 |
| 2 | Grep | `from\s+['"][^.]\|import\s+[^.{]\|require\(['"][^.]` | 외부 패키지 import 수집 |
| 3 | Read | 대상 모듈 파일 | export 목록 확인 |
| 4 | Grep | `import.*대상모듈명\|from.*대상모듈명\|require.*대상모듈명` | 역방향 의존성 추적 (누가 이 모듈을 사용하는가) |
| 5 | Grep | (의존 체인을 따라 반복) | 연쇄 의존성 추적 |

### 적용 시나리오

- 특정 모듈 수정 시 영향받는 파일 범위 산정
- 순환 의존성 해소를 위한 리팩토링 대상 식별
- 외부 라이브러리 업그레이드 시 영향 분석

## 전략 4: 데이터 흐름 추적 전략

특정 데이터(변수, 설정값, API 요청/응답)가 코드를 통해 어떻게 전파되는지 추적할 때 사용합니다.

### 목적

- API 요청 -> 처리 -> 응답 흐름 추적
- 설정값이 어디서 로드되어 어디에 사용되는지 파악
- 데이터 변환(transform) 체인 분석
- 보안 관련 데이터(토큰, 키) 전파 경로 확인

### 도구 조합 예시

| 단계 | 도구 | 패턴/경로 | 목적 |
|------|------|----------|------|
| 1 | Grep | 추적 대상 변수명/함수명 | 모든 사용 위치 수집 |
| 2 | Read | 각 사용 위치 파일 | 변수의 할당/변환/전달 맥락 파악 |
| 3 | Grep | 전달받는 함수/메서드명 | 다음 전파 지점 탐색 |
| 4 | Read | 다음 전파 지점 파일 | 데이터 변환 로직 분석 |
| 5 | (반복) | | 최종 소비 지점까지 추적 |

### 적용 시나리오

- 버그 원인 추적 (데이터가 어디서 오염되는가)
- API 엔드포인트의 전체 처리 흐름 이해
- 보안 감사 (민감 데이터 노출 경로 확인)

## 전략 선택 가이드

탐색 주제에 따라 적절한 전략을 선택합니다. 복합 주제는 여러 전략을 순차적으로 조합합니다.

| 탐색 주제 유형 | 권장 전략 | 설명 |
|--------------|----------|------|
| "이 프로젝트 구조를 파악해줘" | 구조 분석 | 전체 레이아웃 우선 |
| "어떤 디자인 패턴을 쓰고 있나" | 패턴 발견 | 코딩 컨벤션 중심 |
| "이 모듈을 수정하면 어디에 영향이 가나" | 의존성 추적 | blast radius 산정 |
| "이 API가 데이터를 어떻게 처리하나" | 데이터 흐름 추적 | 요청-응답 전체 흐름 |
| "이 프로젝트를 전반적으로 분석해줘" | 구조 분석 -> 패턴 발견 -> 의존성 추적 | 복합 순차 적용 |

## command-research와의 통합 활용

deep-research의 코드베이스 탐색 결과를 command-research의 웹 조사와 결합하면 보다 완전한 연구가 가능합니다.

| 순서 | 스킬 | 활동 | 예시 |
|------|------|------|------|
| 1 | deep-research | 코드베이스에서 사용 중인 패턴/라이브러리 식별 | "이 프로젝트가 사용하는 인증 방식 파악" |
| 2 | command-research | 식별된 패턴/라이브러리의 최신 동향, 대안, 베스트 프랙티스 웹 조사 | "식별된 JWT 방식의 보안 이슈 및 대안 조사" |
| 3 | (분석/종합) | 두 결과를 종합하여 개선 방향 도출 | "현행 방식의 문제점과 마이그레이션 전략" |
