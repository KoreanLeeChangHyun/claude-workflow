---
description: 다중 워크플로우 전략 수립. 대규모 작업을 분석하여 마일스톤, 워크플로우 체인, 로드맵을 생성합니다.
---

# Strategy

## -np 플래그 (No-Plan 모드)

`$ARGUMENTS`에 `-np` 플래그가 포함된 경우 Tier 2 (no-plan) 모드로 실행합니다.

- `-np` 감지 시: init 에이전트 호출에 `mode: no-plan` 전달
- `-np` 미감지 시: 기존과 동일 (mode: full)

```
# -np 플래그 감지 예시
cc:strategy -np "빠른 전략 초안"
-> Task(subagent_type="init", prompt="command: strategy\nmode: no-plan")
```

## 실행 모드 분기

strategy 명령어는 실행 시점의 프로젝트 상태에 따라 두 가지 모드로 분기합니다.

### 판별 기준

프로젝트 루트 디렉토리에 `.kanbanboard` 파일의 존재 여부로 판별합니다.

| 조건 | 모드 | 역할 |
|------|------|------|
| `.kanbanboard` 파일 없음 | **Planner 모드** | 최초 전략 수립. 아래 "전략 수립 절차" 4단계를 실행하여 roadmap.md + .kanbanboard 생성 |
| `.kanbanboard` 파일 존재 | **Judge 모드** | 진행 상황 평가. 아래 "Judge 모드 절차"를 실행하여 마일스톤 진행률 확인 및 완료 판단 |

### 분기 절차

1. 프로젝트 루트에서 `.kanbanboard` 파일 존재 여부를 확인한다
2. `.kanbanboard`가 **없으면** → Planner 모드로 진입 (전략 수립 절차 실행)
3. `.kanbanboard`가 **있으면** → frontmatter의 `project` 필드를 읽어 현재 요청과의 관련성을 확인한 후 Judge 모드로 진입

> **주의**: `.kanbanboard`가 존재하더라도 사용자가 명시적으로 새 프로젝트 전략을 요청한 경우, 기존 `.kanbanboard`를 아카이빙하고 Planner 모드로 실행한다.

## 전략 수립 절차

대규모 작업을 다중 워크플로우로 분해하여 실행 가능한 로드맵을 생성합니다.

### 1단계: 현황 분석

- 코드베이스 구조 및 프로젝트 상태 파악
- 기존 워크플로우 이력(`.workflow/`) 검토
- 기술 스택, 의존성, 제약 사항 식별
- CLAUDE.md의 Known Issues 및 Next Steps 참조

### 2단계: 목표 정의

- 최종 목표(End Goal) 명확화
- 중간 마일스톤(Milestone) 설정
- 각 마일스톤의 완료 기준(Definition of Done) 정의
- 성공 지표(Metrics) 설정 (정량적 기준 우선)

### 3단계: 워크플로우 분해

- 마일스톤별 필요한 워크플로우 식별
- 워크플로우 간 종속성 그래프 설계
- 워크플로우별 명령어 유형 결정 (implement, research, review 등)
- 워크플로우별 예상 복잡도(T1/T2/T3) 산정

### 4단계: 로드맵 생성

- 우선순위 기반 실행 순서 결정
- 종속성을 고려한 병렬/순차 실행 계획
- 리스크 및 완화 전략 식별
- `roadmap.md` 최종 작성

## Judge 모드 절차

`.kanbanboard` 파일이 존재할 때 실행되는 진행 상황 평가 절차입니다.

### 1단계: 현황 로드

- `.kanbanboard` 파일을 읽어 현재 프로젝트 상태를 파악한다
- frontmatter에서 `roadmap` 경로를 추출하여 대응하는 `roadmap.md`를 로드한다

### 2단계: 마일스톤 진행률 계산

- 각 마일스톤 카드의 워크플로우 체크 상태를 집계한다
- 마일스톤별 진행률(완료 워크플로우 수 / 전체 워크플로우 수)을 산출한다
- 전체 프로젝트 진행률을 계산한다 (Done 마일스톤 수 / 전체 마일스톤 수)

### 3단계: roadmap.md 정합성 검증

- roadmap.md의 마일스톤 ID 목록과 `.kanbanboard`의 마일스톤 ID 목록이 일치하는지 확인한다
- 워크플로우 ID 교차 검증을 수행한다
- 불일치가 발견되면 경고를 출력하고 수정 방안을 제안한다

### 4단계: 완료 마일스톤 아카이빙

- In Progress 컬럼에서 모든 워크플로우가 완료된 마일스톤을 Done 컬럼으로 이동한다
- roadmap.md의 해당 마일스톤에 완료일과 상태를 기록한다
- `.kanbanboard`의 `updated` 날짜를 갱신한다

### 5단계: 다음 액션 결정

- **모든 마일스톤이 Done인 경우** → 프로젝트 완료를 선언한다. 최종 성과 요약을 출력한다
- **미완료 마일스톤이 있는 경우** → 다음 실행할 마일스톤과 워크플로우를 추천한다. 우선순위와 종속성을 고려하여 추천 순서를 결정한다

## 핵심 산출물

전략 수립의 최종 산출물은 `roadmap.md`이며, 다음 구조를 포함합니다:

### roadmap.md 구조

```markdown
# [프로젝트/목표명] 로드맵

## 목표
- 최종 목표 및 배경

## 마일스톤

### MS1: [마일스톤명]
- 완료 기준: ...
- 예상 워크플로우: N개

### MS2: [마일스톤명]
- 완료 기준: ...
- 예상 워크플로우: N개

## 워크플로우 체인

| ID | 워크플로우 | 명령어 | 마일스톤 | 종속성 | 복잡도 | 우선순위 |
|----|-----------|--------|---------|--------|--------|---------|
| WF-1 | ... | implement | MS1 | - | T2(N) | P0 |
| WF-2 | ... | research | MS1 | WF-1 | T1(N) | P1 |

## 종속성 그래프

(mermaid flowchart)

## 리스크 및 완화 전략

| 리스크 | 심각도 | 완화 전략 |
|--------|--------|----------|

## 일정 (선택)

| Phase | 워크플로우 | 비고 |
|-------|-----------|------|
```

## 관련 스킬

- `command-strategy` - 전략 수립 상세 가이드 (복잡도 산정, 종속성 그래프, 로드맵 템플릿)

## vs cc:research

| 관점 | cc:research | cc:strategy |
|------|-------------|-------------|
| 목적 | 정보 수집 및 분석 | 의사결정 및 계획 수립 |
| 입력 | 조사 주제, 질문 | 대규모 목표, 프로젝트 비전 |
| 산출물 | 리포트 (report.md) | 로드맵 (roadmap.md) |
| 핵심 활동 | 웹 검색, 코드 탐색, 비교 분석 | 목표 분해, 워크플로우 설계, 우선순위 결정 |
| 시점 | 특정 주제에 대한 정보가 필요할 때 | 대규모 작업의 실행 계획이 필요할 때 |

**사용 예시:**
- `cc:research "React vs Vue 비교 분석"` - 기술 비교 정보를 수집하여 리포트 작성
- `cc:strategy "프론트엔드 마이그레이션 전략"` - React에서 Vue로의 마이그레이션 로드맵 작성
